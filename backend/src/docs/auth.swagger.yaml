tags:
  - name: Autenticación
    description: Endpoints para registro, login y gestión de usuarios

paths:
  /auth/register:
    post:
      summary: Registrar un nuevo usuario
      description: Crea una nueva cuenta de usuario en el sistema
      tags: [Autenticación]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                username:
                  type: string
                  description: Nombre de usuario (único)
                  example: "usuario123"
                email:
                  type: string
                  format: email
                  description: Correo electrónico del usuario
                  example: "usuario@example.com"
                password:
                  type: string
                  format: password
                  description: Contraseña (mínimo 6 caracteres)
                  example: "contraseña123"
                role:
                  type: string
                  enum: [user, admin]
                  description: Rol del usuario (user por defecto)
              required:
                - username
                - email
                - password
      responses:
        201:
          description: Usuario creado exitosamente
        400:
          description: Datos inválidos o email ya registrado

  /auth/login:
    post:
      summary: Iniciar sesión
      description: Autenticar usuario y obtener token JWT
      tags: [Autenticación]
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                username:
                  type: string
                  description: Nombre de usuario o correo electrónico
                  example: "usuario123"
                password:
                  type: string
                  format: password
                  description: Contraseña del usuario
                  example: "contraseña123"
              required:
                - email
                - password
      responses:
        200:
          description: Login exitoso, devuelve token JWT
        401:
          description: Credenciales inválidas

  /auth/profile:
    get:
      summary: Obtener perfil del usuario
      description: Obtiene la información del perfil del usuario autenticado
      tags: [Autenticación]
      security:
        - bearerAuth: []
      responses:
        200:
          description: Datos del perfil recuperados exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    description: ID único del usuario
                  username:
                    type: string
                    description: Nombre de usuario
                  email:
                    type: string
                    description: Correo electrónico
                  role:
                    type: string
                    description: Rol del usuario
        401:
          description: No autorizado - Token inválido o expirado
        403:
          description: Prohibido - No tienes permiso para ver este perfil

  /auth/allUsers:
    get:
      summary: Obtener todos los usuarios
      description: Obtiene la información del perfil de todos los usuarios autenticados
      tags: [Autenticación]
      responses:
        200:
          description: Datos de los usuarios recuperados exitosamente
          content:
            application/json:
              # Respuesta exitosa (200) al obtener todos los usuarios.
              # El esquema de respuesta incluye el id, nombre de usuario, correo electrónico y rol de cada usuario.
              schema:
                type: object
                properties:
                  id:
                    type: string
                    description: ID único del usuario
                  username:
                    type: string
                    description: Nombre de usuario
                  email:
                    type: string
                    description: Correo electrónico
                  role:
                    type: string
                    description: Rol del usuario
        401:
          description: No autorizado - Token inválido o expirado
        403:
          description: Prohibido - No tienes permiso para ver este perfil

  /auth/byUsername/:username:
    get:
      summary: Obtener usuario por username
      description: Obtiene la información del perfil del usuario autenticado mediante su nombre de usuario
      tags: [Autenticación]
      responses:
        200:
          description: Datos del usuario recuperados exitosamente
          content:
            application/json:
              # Respuesta exitosa (200) al obtener todos los usuarios.
              # El esquema de respuesta incluye el id, nombre de usuario, correo electrónico y rol de cada usuario.
              schema:
                type: object
                properties:
                  id:
                    type: string
                    description: ID único del usuario
                  username:
                    type: string
                    description: Nombre de usuario
                  email:
                    type: string
                    description: Correo electrónico
                  role:
                    type: string
                    description: Rol del usuario
        401:
          description: No autorizado - Token inválido o expirado
        403:
          description: Prohibido - No tienes permiso para ver este perfil

  /auth/updateUser/:uid:
    put:
      summary: Editar usuario
      description: Edita la información del perfil del usuario autenticado
      tags: [Autenticación]
      security:
        - bearerAuth: []
      responses:
        200:
          description: Datos del usuario actualizados exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    description: ID único del usuario
                  username:
                    type: string
                    description: Nombre de usuario
                  email:
                    type: string
                    description: Correo electrónico
                  role:
                    type: string
                    description: Rol del usuario
        401:
          description: No autorizado - Token inválido o expirado
        403:
          description: Prohibido - No tienes permiso para ver este perfil

  /auth/deleteUser/:uid:
    delete:
      summary: Eliminar usuario
      description: Elimina el perfil del usuario autenticado
      tags: [Autenticación]
      security:
        - bearerAuth: []
      responses:
        200:
          description: Datos del usuario eliminados exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    description: ID único del usuario
                  username:
                    type: string
                    description: Nombre de usuario
                  email:
                    type: string
                    description: Correo electrónico
                  role:
                    type: string
                    description: Rol del usuario
        401:
          description: No autorizado - Token inválido o expirado
        403:
          description: Prohibido - No tienes permiso para ver este perfil
